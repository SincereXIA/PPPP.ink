---
title: Pan Pan Pan 盘盘盘
date: '2021-07-03T02:59:15.227Z'
autoIgnore: true
categories:
        - 闲言碎语
tags: null
---

大早晨的，沃老师来找我要网盘的截图，不得不说沃老师心态真好...

实话说，这网盘可能是我做过的最让人难受的项目了，各种接口琐碎混乱，一条请求甚至内部可能需要三四次 http 转发，这架构从头开始就不合理。

**血泪教训：**

1. 接口越少越好，能不用接口就不用接口
2. 模块越少越好，模块之间不到万不得已，千万别用 http 来通信，千万别解析 json 的方式通信。
3. 开发的人越少越好，最好所有人都从头参与，别再半中间拉人来写代码了
4. 能不用分布式就别上分布式，可能是我功力不够，多节点之间巨难调试
5. 遇到各种数据同步问题，别想着自己写代码同步了，整个分布式数据库吧，或者什么成熟的框架都可以，自己写同步代码简直是地狱
6. 多写测试代码啊多写测试，测试要覆盖全啊覆盖全，日志要好好写啊好好写，不该打日志的地方就不要打，一大堆日志啥信息都没有，简直就走干扰调试；该打日志的时候一定要打啊，把出错的地方写明白啊写明白，把触发问题的上下文变量打印出来啊打印出来。
